<div id="three-container" class="w-full h-[400px] bg-black rounded-lg"></div>

<script type="module">
  import * as THREE from "three";
  import { GLTFLoader } from "three/examples/jsm/loaders/GLTFLoader.js";
  import { OrbitControls } from "three/examples/jsm/controls/OrbitControls.js";

  const container = document.getElementById("three-container");

  // Scene
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0x000000);

  // Camera
  const camera = new THREE.PerspectiveCamera(
    50,
    container.clientWidth / container.clientHeight,
    0.1,
    1000
  );
camera.position.set(0, 2, 20);


  // Renderer
  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(container.clientWidth, container.clientHeight);
  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
  container.appendChild(renderer.domElement);

  // ðŸ”† LIGHTS (VIGTIGST)
  const ambient = new THREE.AmbientLight(0xffffff, 1.5);
  scene.add(ambient);

  const directional = new THREE.DirectionalLight(0xffffff, 2);
  directional.position.set(5, 10, 5);
  scene.add(directional);

  // Controls
  const controls = new OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.target.set(0, 0, 0);

  // Loader
  const loader = new GLTFLoader();
  loader.load(
    "/models/DroneBlender.glb",
    (gltf) => {
      const model = gltf.scene;

      // ðŸ‘‡ MEGET VIGTIGT: skalering (Blender-modeller er ofte store)
     model.scale.set(1, 1, 1);


      scene.add(model);

      // Auto-center model
      const box = new THREE.Box3().setFromObject(model);
      const center = box.getCenter(new THREE.Vector3());
      model.position.sub(center);

      // Kamera kigger pÃ¥ modellen
      controls.target.copy(new THREE.Vector3(0, 0, 0));
      controls.update();
    },
    undefined,
    (error) => {
      console.error("Fejl ved loading af GLB:", error);
    }
  );

  // Resize
  window.addEventListener("resize", () => {
    const w = container.clientWidth;
    const h = container.clientHeight;
    camera.aspect = w / h;
    camera.updateProjectionMatrix();
    renderer.setSize(w, h);
  });

  // Render loop
  function animate() {
    requestAnimationFrame(animate);
    controls.update();
    renderer.render(scene, camera);
  }

  animate();
</script>
